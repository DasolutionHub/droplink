<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="DropLink - Share your live location with customers via WhatsApp in one click">
  <meta name="theme-color" content="#0f3e14">
  <link rel="manifest" href="/manifest.json">
  <title>DropLink | Professional Location Sharing</title>

  <!-- Fonts & Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-dark: #000;
      --primary: #00ff88;
      --primary-light: #33ffaa;
      --text-light: #e0e0e0;
      --text-dark: #ccc;
      --border-radius: 12px;
      --transition: all 0.3s ease;
    }
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif; }
    body {
      background: var(--bg-dark);
      color: var(--text-light);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }
    body::before {
      content:'';
      position:fixed; top:0; left:0; width:200%; height:200%;
      background-image: radial-gradient(rgba(0,255,100,0.2) 1px, transparent 1px);
      background-size:20px 20px;
      animation: moveDots 20s linear infinite;
      pointer-events:none; z-index:0;
    }
    @keyframes moveDots { from { background-position: 0 0; } to { background-position: -100px -100px; } }
    .container { position:relative; z-index:1; max-width:1000px; width:100%; margin:0 auto; padding:20px; }
    header { display:flex; justify-content:space-between; align-items:center; padding:20px 0; }
    .logo { display:flex; align-items:center; gap:12px; font-weight:700; font-size:1.8rem; color:var(--primary); }
    .nav-links { display:flex; gap:25px; }
    .nav-links a { text-decoration:none; color:var(--text-dark); font-weight:500; transition:var(--transition); cursor:pointer; }
    .nav-links a:hover { color:var(--primary-light); }
    .hero { text-align:center; margin:40px 0; }
    .hero h1 {
      font-size:3.5rem;
      line-height:1.2;
      display:inline-block;
      background: rgba(0,255,136,0.2);
      color: var(--primary);
      padding: 10px 20px;
      border-radius: var(--border-radius);
      text-shadow: 0 4px 8px rgba(0,255,136,0.9), 0 0 30px rgba(0,255,136,0.7);
    }
    .hero p { font-size:1.2rem; color:var(--text-dark); max-width:700px; margin:15px auto; }
    .app-container { display:flex; justify-content:center; }
    .app-card {
      background:rgba(0,0,0,0.6);
      border-radius:var(--border-radius);
      padding:30px;
      width:100%; max-width:500px;
      box-shadow:0 4px 20px rgba(0,0,0,0.8);
      transition:var(--transition);
    }
    .app-card:hover { transform:translateY(-5px); box-shadow:0 8px 30px rgba(0,0,0,1); }
    .app-card h2 { color:var(--primary); margin-bottom:20px; display:flex; align-items:center; gap:10px; font-weight:600; }
    .input-group { margin-bottom:20px; }
    .input-group label { display:flex; align-items:center; gap:8px; margin-bottom:8px; font-weight:500; color:var(--text-light); }
    .input-field {
      width:100%; padding:14px; border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.05); color:var(--text-light);
      border-radius:var(--border-radius); transition:var(--transition);
    }
    .input-field:focus { border-color:var(--primary); outline:none; background:rgba(255,255,255,0.1); }
    .btn {
      background:var(--primary); color:#000; padding:14px 28px; font-size:1.1rem;
      font-weight:600; border:none; border-radius:var(--border-radius); cursor:pointer; transition:var(--transition);
      width:100%; margin-top:10px;
    }
    .btn:hover { background:var(--primary-light); transform:translateY(-2px); }
    .preview {
      background:rgba(255,255,255,0.05); border-left:4px solid var(--primary);
      padding:20px; border-radius:var(--border-radius); color:var(--text-light);
      margin-top:20px;
    }
    .validation-message { font-size:0.9rem; display:flex; align-items:center; gap:8px; }
    .validation-success { color:#22c55e; }
    .validation-error { color:#ef4444; }
    .confirmation { margin-top:10px; font-weight:600; color:#22c55e; opacity:0; animation: fadeIn 0.5s forwards; }
    .how-section { display:none; padding:30px; background:rgba(0,0,0,0.6); border-radius:var(--border-radius); }
    .how-section h2 { color:var(--primary); font-size:2rem; margin-bottom:15px; }
    .how-section ul { list-style-type: disc; padding-left:20px; color:var(--text-light); }
    @keyframes fadeIn { to { opacity:1; } }
    footer { text-align:center; padding:30px 0; margin-top:auto; color:var(--text-dark); font-size:0.9rem; }
    @media(max-width:768px){ .nav-links{ display:none; } }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo"><i class="fas fa-paper-plane"></i><span>DropLink</span></div>
      <nav class="nav-links">
        <a onclick="location.reload()"><i class="fas fa-home"></i> Home</a>
        <a id="howLink"><i class="fas fa-question-circle"></i> How It Works</a>
      </nav>
    </header>
    <!-- Main Content -->
    <div id="mainContent">
      <section class="hero">
        <h1>Share Your Live Location Instantly</h1>
        <p>Empower riders with a sleek, one-click solution to share real-time locations via WhatsApp—boosting delivery speed and trust.</p>
      </section>
      <div class="app-container">
        <div class="app-card">
          <h2><i class="fas fa-map-marker-alt"></i> Delivery Info</h2>
          <div class="input-group">
            <label for="location"><i class="fas fa-link"></i> Google Maps Live Link</label>
            <input type="text" id="location" class="input-field" placeholder="https://maps.app.goo.gl/...">
            <div id="locationValidation" class="validation-message"></div>
          </div>
          <div class="input-group">
            <label for="customerName"><i class="fas fa-user"></i> Customer Name</label>
            <input type="text" id="customerName" class="input-field" placeholder="e.g. John Doe">
          </div>
          <div class="input-group">
            <label for="customerPhone"><i class="fas fa-phone"></i> Customer Phone</label>
            <input type="tel" id="customerPhone" class="input-field" placeholder="e.g. 09012345678">
          </div>
          <div class="input-group">
            <label for="riderName"><i class="fas fa-motorcycle"></i> Rider Name</label>
            <input type="text" id="riderName" class="input-field" placeholder="e.g. Musa">
          </div>
          <button id="previewBtn" class="btn"><i class="fas fa-eye"></i> Preview Message</button>

          <div id="previewContainer" class="preview" style="display:none;">
            <div id="messagePreview" style="white-space:pre-line;"></div>
            <button id="generateBtn" class="btn" style="margin-top:15px;"><i class="fas fa-paper-plane"></i> Generate Message Now</button>
            <div id="confirmation" class="confirmation"><i class="fas fa-check-circle"></i> Message Sent!</div>
          </div>
        </div>
      </div>
    </div>
    <!-- How It Works Section -->
    <div id="howSection" class="how-section container">
      <h2>How DropLink Works</h2>
      <ul>
        <li>Copy your live location link from Google Maps.</li>
        <li>Paste it into the "Google Maps Live Link" field.</li>
        <li>Enter the customer’s name and phone number, and the rider’s name.</li>
        <li>Click "Preview Message" to see the formatted text.</li>
        <li>Click "Generate Message Now" to open WhatsApp with the message ready to send.</li>
      </ul>
    </div>
    <footer>© 2025 DropLink | A High-Tech Logistics Solution</footer>
  </div>

  <script>
    // Register service worker
    if ('serviceWorker' in navigator) navigator.serviceWorker.register('/service-worker.js');

    // Elements
    const locInput = document.getElementById('location');
    const nameInput = document.getElementById('customerName');
    const phoneInput = document.getElementById('customerPhone');
    const riderInput = document.getElementById('riderName');
    const valMsg = document.getElementById('locationValidation');
    const previewBtn = document.getElementById('previewBtn');
    const generateBtn = document.getElementById('generateBtn');
    const previewContainer = document.getElementById('previewContainer');
    const msgPrev = document.getElementById('messagePreview');
    const confirmEl = document.getElementById('confirmation');
    const howLink = document.getElementById('howLink');
    const mainContent = document.getElementById('mainContent');
    const howSection = document.getElementById('howSection');

    // Navigation
    howLink.addEventListener('click', () => { mainContent.style.display = 'none'; howSection.style.display = 'block'; });

    // Validation & Preview
    function validateLink(url) {
      const pattern = /^https:\/\/maps\.(app\.goo\.gl|google\.com\/maps)/;
      const valid = pattern.test(url.trim());
      valMsg.textContent = valid ? '✔️ Valid link' : '❌ Invalid link';
      valMsg.className = 'validation-message ' + (valid ? 'validation-success' : 'validation-error');
      return valid;
    }

    function formatPhone(phone) {
      let num = phone.replace(/[^0-9+]/g, '');
      if (num.startsWith('0')) num = '234' + num.slice(1);
      if (num.startsWith('+')) num = num.slice(1);
      return num;
    }

    previewBtn.addEventListener('click', () => {
      if (!validateLink(locInput.value) || !nameInput.value.trim() || !phoneInput.value.trim() || !riderInput.value.trim()) return;
      const link = locInput.value.trim();
      const customer = nameInput.value.trim();
      const rider = riderInput.value.trim();
      const message = `📦 Hello ${customer}, your delivery is on the way!\n🚴 Track it live: ${link}\n👤 Rider: ${rider}\n🙏 Powered by DropLink`;
      msgPrev.textContent = message;
      previewContainer.style.display = 'block'; confirmEl.style.opacity = '0';
    });

    generateBtn.addEventListener('click', () => {
      const phone = formatPhone(phoneInput.value.trim());
      const text = encodeURIComponent(msgPrev.textContent);
      window.open(`https://wa.me/${phone}?text=${text}`, '_blank');
      confirmEl.style.opacity = '1'; setTimeout(() => confirmEl.style.opacity = '0', 3000);
    });

    locInput.addEventListener('input', () => { valMsg.textContent = ''; });
  </script>
</body>
</html>


